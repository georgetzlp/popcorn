var _=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var I=_(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var N=["all","braille","embossed","handheld","print","projection","screen","speech","tty","tv"],G=[0,1,2,3];function k(e){if(e){if(e.medium&&!N.includes(e.medium))throw new Error(`The medium must be one of the following: ${N.join(", ")}`);if(e.warningLevel&&!G.includes(e.warningLevel))throw new Error(`The warning level must be one of the following: ${G.join(", ")}`);if(e.timeout!==void 0&&!Number.isInteger(e.timeout))throw new Error("The timeout must be an integer");if(e.timeout&&e.timeout<0)throw new Error("The timeout must be a positive integer")}}E.default=k});var L=_(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});var P=class extends Error{constructor(t,n){super(t),this.statusCode=n,this.name="BadStatusError"}};M.default=P});var T=_(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});y.boundaryLength=void 0;y.boundaryLength=34;var x=()=>{let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="";for(let n=0;n<10;n+=1)t+=e[Math.floor(Math.random()*e.length)];return`----CSSValidatorBoundary${t}`};y.default=x});var A=_(w=>{"use strict";var X=w&&w.__awaiter||function(e,t,n,i){function r(u){return u instanceof n?u:new n(function(a){a(u)})}return new(n||(n=Promise))(function(u,a){function c(o){try{l(i.next(o))}catch(d){a(d)}}function s(o){try{l(i.throw(o))}catch(d){a(d)}}function l(o){o.done?u(o.value):r(o.value).then(c,s)}l((i=i.apply(e,t||[])).next())})},Z=w&&w.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(w,"__esModule",{value:!0});var ee=Z(L()),te=T(),ne=(e,t,n)=>X(void 0,void 0,void 0,function*(){let i=new AbortController;setTimeout(()=>{i.abort()},n);let r=null;try{if(r=yield fetch(`https://jigsaw.w3.org/css-validator/validator${e==="GET"?t:""}`,Object.assign({method:e,signal:i.signal},e==="POST"?{headers:{"Content-Type":`multipart/form-data; boundary=${t.slice(2,te.boundaryLength+2)}`,"Content-Length":String(new TextEncoder().encode(t).byteLength)},body:t}:{})),!r.ok)throw new ee.default(r.statusText,r.status)}catch(a){throw a instanceof Error&&a.name==="AbortError"?new Error(`The request took longer than ${n}ms`):a}if(!r)throw new Error("Response expected");return(yield r.json()).cssvalidation});w.default=ne});var U=_(f=>{"use strict";var ie=f&&f.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),re=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ue=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&ie(t,e,n);return re(t,e),t},ae=f&&f.__awaiter||function(e,t,n,i){function r(u){return u instanceof n?u:new n(function(a){a(u)})}return new(n||(n=Promise))(function(u,a){function c(o){try{l(i.next(o))}catch(d){a(d)}}function s(o){try{l(i.throw(o))}catch(d){a(d)}}function l(o){o.done?u(o.value):r(o.value).then(c,s)}l((i=i.apply(e,t||[])).next())})},oe=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(f,"__esModule",{value:!0});var le=ue(require("https")),se=oe(L()),ce=T(),de=require("util"),fe=(e,t,n)=>ae(void 0,void 0,void 0,function*(){return new Promise((i,r)=>{let u=le.request(`https://jigsaw.w3.org/css-validator/validator${e==="GET"?t:""}`,Object.assign({method:e,timeout:n},e==="POST"?{headers:{"Content-Type":`multipart/form-data; boundary=${t.slice(2,ce.boundaryLength+2)}`,"Content-Length":String(new de.TextEncoder().encode(t).byteLength)}}:{}),a=>{var c;typeof a.statusCode=="number"&&(a.statusCode<200||a.statusCode>=300)&&r(new se.default((c=a.statusMessage)!==null&&c!==void 0?c:"",a.statusCode));let s="";a.on("data",l=>{try{s+=l}catch(o){r(o)}}),a.on("end",()=>{try{i(JSON.parse(s).cssvalidation)}catch(l){r(l)}})});e==="POST"&&u.write(t),u.on("timeout",()=>{r(new Error(`The request took longer than ${n}ms`))}),u.end()})});f.default=fe});var H=_(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});function _e(e){var t;let n={uri:encodeURIComponent(e.url),usermedium:(t=e?.medium)!==null&&t!==void 0?t:"all",warning:e?.warningLevel?e.warningLevel-1:"no",output:"application/json",profile:"css3"};return`?${Object.entries(n).map(([i,r])=>`${i}=${r}`).join("&")}`}S.default=_e});var F=_(O=>{"use strict";var ve=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(O,"__esModule",{value:!0});var he=ve(T()),we=e=>{var t;let n=`\r
`,i=`--${(0,he.default)()}`,r=[`Content-Disposition: form-data; name="text"${n}${n}${e.text}${n}`,`Content-Disposition: form-data; name="profile"${n}${n}css3${n}`,`Content-Disposition: form-data; name="output"${n}${n}application/json${n}`,`Content-Disposition: form-data; name="usermedium"${n}${n}${(t=e.medium)!==null&&t!==void 0?t:"all"}${n}`,`Content-Disposition: form-data; name="warning"${n}${n}${e?.warningLevel?String(e.warningLevel-1):"no"}${n}`];return`${i}${n}${r.join(`${i}${n}`)}${i}`};O.default=we});var Q=_(p=>{"use strict";var B=p&&p.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(p,"__esModule",{value:!0});var ge=B(H()),me=B(F()),be=(e,t)=>{if(e==="GET"){if("text"in t)throw new Error("A GET request is not supported with validation by text");return(0,ge.default)(t)}if(e==="POST"){if("url"in t)throw new Error("A POST request is not supported with validation by URL");return(0,me.default)(t)}throw new Error(`Parameter processing called with unrecognized method: ${e}`)};p.default=be});var j=_(g=>{"use strict";var ye=g&&g.__awaiter||function(e,t,n,i){function r(u){return u instanceof n?u:new n(function(a){a(u)})}return new(n||(n=Promise))(function(u,a){function c(o){try{l(i.next(o))}catch(d){a(d)}}function s(o){try{l(i.throw(o))}catch(d){a(d)}}function l(o){o.done?u(o.value):r(o.value).then(c,s)}l((i=i.apply(e,t||[])).next())})},C=g&&g.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(g,"__esModule",{value:!0});var Oe=C(I()),pe=C(A()),Te=C(U()),Ce=C(Q()),$e=(e,t,n)=>ye(void 0,void 0,void 0,function*(){(0,Oe.default)({timeout:n,medium:t.medium,warningLevel:t.warningLevel});let i=(0,Ce.default)(e,t);return typeof window<"u"&&typeof window?.fetch=="function"?yield(0,pe.default)(e,i,n):yield(0,Te.default)(e,i,n)});g.default=$e});var V=_(m=>{"use strict";var Ee=m&&m.__awaiter||function(e,t,n,i){function r(u){return u instanceof n?u:new n(function(a){a(u)})}return new(n||(n=Promise))(function(u,a){function c(o){try{l(i.next(o))}catch(d){a(d)}}function s(o){try{l(i.throw(o))}catch(d){a(d)}}function l(o){o.done?u(o.value):r(o.value).then(c,s)}l((i=i.apply(e,t||[])).next())})},Pe=m&&m.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(m,"__esModule",{value:!0});var Me=Pe(j());function Le(e,t){var n,i,r;return Ee(this,void 0,void 0,function*(){if(!e)throw new Error("You must pass in text to be validated");if(typeof e!="string")throw new Error("The text to be validated must be a string");let u=yield(0,Me.default)("POST",{text:e,medium:t?.medium,warningLevel:t?.warningLevel},(n=t?.timeout)!==null&&n!==void 0?n:1e4),a={valid:!1,errors:[]},c=t?.warningLevel?Object.assign(Object.assign({},a),{warnings:[]}):a;return c.valid=u.validity,(i=u.errors)===null||i===void 0||i.forEach(s=>{c.errors.push({line:s.line,message:s.message.replace(/[ :]+$/,"").trim()})}),"warnings"in c&&((r=u.warnings)===null||r===void 0||r.forEach(s=>{c.warnings.push({line:s.line,message:s.message.replace(/[ :]+$/,"").trim(),level:s.level+1})})),c})}m.default=Le});var W=_(b=>{"use strict";var Se=b&&b.__awaiter||function(e,t,n,i){function r(u){return u instanceof n?u:new n(function(a){a(u)})}return new(n||(n=Promise))(function(u,a){function c(o){try{l(i.next(o))}catch(d){a(d)}}function s(o){try{l(i.throw(o))}catch(d){a(d)}}function l(o){o.done?u(o.value):r(o.value).then(c,s)}l((i=i.apply(e,t||[])).next())})},je=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(b,"__esModule",{value:!0});var De=je(j());function qe(e,t){var n,i,r;return Se(this,void 0,void 0,function*(){if(!e)throw new Error("You must pass in a URL to be validated");if(typeof e!="string")throw new Error("The URL to be validated must be a string");let u=yield(0,De.default)("GET",{url:e,medium:t?.medium,warningLevel:t?.warningLevel},(n=t?.timeout)!==null&&n!==void 0?n:1e4),a={valid:!1,errors:[]},c=t?.warningLevel?Object.assign(Object.assign({},a),{warnings:[]}):a;return c.valid=u.validity,(i=u.errors)===null||i===void 0||i.forEach(s=>{var l;c.errors.push({line:s.line,message:s.message.replace(/[ :]+$/,"").trim(),url:(l=s.source)!==null&&l!==void 0?l:null})}),"warnings"in c&&((r=u.warnings)===null||r===void 0||r.forEach(s=>{var l;c.warnings.push({line:s.line,message:s.message.replace(/[ :]+$/,"").trim(),level:s.level+1,url:(l=s.source)!==null&&l!==void 0?l:null})})),c})}b.default=qe});var z=_((D,Y)=>{"use strict";var K=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Re=K(V()),Ne=K(W()),Ge={validateText:Re.default,validateURL:Ne.default};Y.exports=Ge});var v=require("electron");var h={getConfig:"POPCORN_GET_CONFIG",getQuickCss:"POPCORN_GET_QUICK_CSS",getTheme:"POPCORN_GET_THEME",getThemes:"POPCORN_GET_THEMES",onQuickCssChange:"POPCORN_ON_QUICK_CSS_CHANGE",onThemeChange:"POPCORN_ON_THEME_CHANGE",saveState:"POPCORN_SAVE_STATE",unwatchTheme:"POPCORN_UNWATCH_THEME_FILE",watchTheme:"POPCORN_WATCH_THEME_FILE"};var q={str:"gold",arr:[255,215,0]},$=class{constructor(t,n="console"){this.log=(...t)=>this.#e("log",t);this.info=(...t)=>this.#e("info",t);this.warn=(...t)=>this.#e("warn",t);this.error=(...t)=>this.#e("error",t);this.debug=(...t)=>this.#e("debug",t);this.module=t,this.output=this.#t(n)}#t(t){switch(t){case"ansi":case"terminal":return"ansi";default:return"console"}}#n(t){switch(t){case"info":case"warn":case"error":case"debug":return t;default:return"log"}}#i(t){switch(t){case"debug":return{str:"MediumSpringGreen",arr:[0,250,154]};case"info":return{str:"DeepSkyBlue",arr:[0,191,255]};case"error":return{str:"crimson",arr:[220,20,60]};case"warn":return{str:"DarkOrange",arr:[255,140,0]};default:return null}}#r(t,n){return`\x1B[38;2;${t[0]};${t[1]};${t[2]}m${n}\x1B[0m`}#e(t,n){let i=this.#i(t)??q,r=this.output==="ansi"?[`[${this.#r(i.arr,"Popcorn")} > ${this.module}]`]:[`[%cPopcorn%c > ${this.module}]`,`color: ${i.str||q.str};`,""];console[this.#n(t)](...r,...n)}},R=$;var Ie=new R("Preload"),Ae=v.ipcRenderer.invoke(h.getConfig),J={config:Ae,validateCSS:null,getThemes:()=>v.ipcRenderer.invoke(h.getThemes),onThemeChange:e=>v.ipcRenderer.on(h.onThemeChange,(t,n)=>e(n)),saveState:(e,t)=>v.ipcRenderer.send(h.saveState,e,t),unwatchTheme:e=>v.ipcRenderer.send(h.unwatchTheme,e),watchTheme:e=>v.ipcRenderer.send(h.watchTheme,e)};try{let e=z();J.validateCSS=e.validateText}catch{Ie.info("Disabled CSSValidator")}v.contextBridge.exposeInMainWorld("PopcornNative",J);
