var or=Object.create;var Ot=Object.defineProperty;var ir=Object.getOwnPropertyDescriptor;var sr=Object.getOwnPropertyNames;var cr=Object.getPrototypeOf,lr=Object.prototype.hasOwnProperty;var V=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ar=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of sr(e))!lr.call(t,o)&&o!==n&&Ot(t,o,{get:()=>e[o],enumerable:!(r=ir(e,o))||r.enumerable});return t};var qe=(t,e,n)=>(n=t!=null?or(cr(t)):{},ar(e||!t||!t.__esModule?Ot(n,"default",{value:t,enumerable:!0}):n,t));var tt=V(Bt=>{Bt.debounce=function(t,e,n){var r,o,i;e===void 0&&(e=50),n===void 0&&(n={});var s=(r=n.isImmediate)!=null&&r,l=(o=n.callback)!=null&&o,c=n.maxWait,u=Date.now(),a=[];function d(){if(c!==void 0){var h=Date.now()-u;if(h+e>=c)return c-h}return e}var f=function(){var h=[].slice.call(arguments),_=this;return new Promise(function(O,b){var y=s&&i===void 0;if(i!==void 0&&clearTimeout(i),i=setTimeout(function(){if(i=void 0,u=Date.now(),!s){var m=t.apply(_,h);l&&l(m),a.forEach(function(F){return(0,F.resolve)(m)}),a=[]}},d()),y){var E=t.apply(_,h);return l&&l(E),O(E)}a.push({resolve:O,reject:b})})};return f.cancel=function(h){i!==void 0&&clearTimeout(i),a.forEach(function(_){return(0,_.reject)(h)}),a=[]},f}});var rt=V(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});function Qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ut(Object(n),!0).forEach(function(r){Qt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wt(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function Tr(t,e){if(t==null)return{};var n=Wt(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mr(t,e){return Kt(t)||Gt(t,e)||Yt(t,e)||Xt()}function Kt(t){if(Array.isArray(t))return t}function Gt(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,o=!1,i=void 0;try{for(var s=t[Symbol.iterator](),l;!(r=(l=s.next()).done)&&(n.push(l.value),!(e&&n.length===e));r=!0);}catch(c){o=!0,i=c}finally{try{!r&&s.return!=null&&s.return()}finally{if(o)throw i}}return n}}function Yt(t,e){if(t){if(typeof t=="string")return nt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(t,e)}}function nt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}U.arrayLikeToArray=nt;U.arrayWithHoles=Kt;U.defineProperty=Qt;U.iterableToArrayLimit=Gt;U.nonIterableRest=Xt;U.objectSpread2=jr;U.objectWithoutProperties=Tr;U.objectWithoutPropertiesLoose=Wt;U.slicedToArray=Mr;U.unsupportedIterableToArray=Yt});var tn=V((Ki,en)=>{"use strict";function Nr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jt(Object(n),!0).forEach(function(r){Nr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ar(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(o,i){return i(o)},r)}}function ve(t){return function e(){for(var n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return o.length>=t.length?t.apply(this,o):function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];return e.apply(n,[].concat(o,l))}}}function Ne(t){return{}.toString.call(t).includes("Object")}function Ir(t){return!Object.keys(t).length}function we(t){return typeof t=="function"}function xr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Dr(t,e){return Ne(e)||Z("changeType"),Object.keys(e).some(function(n){return!xr(t,n)})&&Z("changeField"),e}function zr(t){we(t)||Z("selectorType")}function Lr(t){we(t)||Ne(t)||Z("handlerType"),Ne(t)&&Object.values(t).some(function(e){return!we(e)})&&Z("handlersType")}function qr(t){t||Z("initialIsRequired"),Ne(t)||Z("initialType"),Ir(t)&&Z("initialContent")}function Hr(t,e){throw new Error(t[e]||t.default)}var Rr={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Z=ve(Hr)(Rr),Me={changes:Dr,selector:zr,handler:Lr,initial:qr};function Vr(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Me.initial(t),Me.handler(e);var n={current:t},r=ve(Qr)(n,e),o=ve(Ur)(n),i=ve(Me.changes)(t),s=ve(Br)(n);function l(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(a){return a};return Me.selector(u),u(n.current)}function c(u){Ar(r,o,i,s)(u)}return[l,c]}function Br(t,e){return we(e)?e(t.current):e}function Ur(t,e){return t.current=Zt(Zt({},t.current),e),e}function Qr(t,e,n){return we(e)?e(t.current):Object.keys(n).forEach(function(r){var o;return(o=e[r])===null||o===void 0?void 0:o.call(e,t.current[r])}),n}var Wr={create:Vr};en.exports=Wr});var nn=V(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});var Kr={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.36.1/min/vs"}};ot.default=Kr});var rn=V(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});function Gr(t){return function e(){for(var n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return o.length>=t.length?t.apply(this,o):function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];return e.apply(n,[].concat(o,l))}}}it.default=Gr});var on=V(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});function Yr(t){return{}.toString.call(t).includes("Object")}st.default=Yr});var sn=V(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});var Xr=rn(),Jr=on();function Zr(t){return t||ct("configIsRequired"),Jr.default(t)||ct("configType"),t.urls?(eo(),{paths:{vs:t.urls.monacoBase}}):t}function eo(){console.warn(lt.deprecation)}function to(t,e){throw new Error(t[e]||t.default)}var lt={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},ct=Xr.default(to)(lt),no={config:Zr};ke.default=no;ke.errorHandler=ct;ke.errorMessages=lt});var cn=V(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});var ro=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(o){return n.reduceRight(function(i,s){return s(i)},o)}};at.default=ro});var un=V(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});var ln=rt();function an(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],an(t[n],e[n]))}),ln.objectSpread2(ln.objectSpread2({},t),e)}ut.default=an});var dn=V(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});var fn={type:"cancelation",msg:"operation is manually canceled"};function oo(t){var e=!1,n=new Promise(function(r,o){t.then(function(i){return e?o(fn):r(i)}),t.catch(o)});return n.cancel=function(){return e=!0},n}Ae.CANCELATION_MESSAGE=fn;Ae.default=oo});var hn=V(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});var pn=rt(),io=tn(),so=nn(),co=sn(),lo=cn(),ao=un(),ft=dn();function uo(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var fo=uo(io),po=fo.default.create({config:so.default,isInitialized:!1,resolve:null,reject:null,monaco:null}),mn=pn.slicedToArray(po,2),Ce=mn[0],Ie=mn[1];function mo(t){var e=co.default.config(t),n=e.monaco,r=pn.objectWithoutProperties(e,["monaco"]);Ie(function(o){return{config:ao.default(o.config,r),monaco:n}})}function _o(){var t=Ce(function(e){var n=e.monaco,r=e.isInitialized,o=e.resolve;return{monaco:n,isInitialized:r,resolve:o}});if(!t.isInitialized){if(Ie({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),ft.default(dt);if(window.monaco&&window.monaco.editor)return _n(window.monaco),t.resolve(window.monaco),ft.default(dt);lo.default(ho,bo)(yo)}return ft.default(dt)}function ho(t){return document.body.appendChild(t)}function go(t){var e=document.createElement("script");return t&&(e.src=t),e}function bo(t){var e=Ce(function(r){var o=r.config,i=r.reject;return{config:o,reject:i}}),n=go("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function yo(){var t=Ce(function(n){var r=n.config,o=n.resolve,i=n.reject;return{config:r,resolve:o,reject:i}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){_n(n),t.resolve(n)},function(n){t.reject(n)})}function _n(t){Ce().monaco||Ie({monaco:t})}function vo(){return Ce(function(t){var e=t.monaco;return e})}var dt=new Promise(function(t,e){return Ie({resolve:t,reject:e})}),wo={config:mo,init:_o,__getMonacoInstance:vo};pt.default=wo});var gn=V(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});var ko=hn();mt.default=ko.default});var ur=t=>{let e=new Set;do for(let n of Reflect.ownKeys(t))e.add([t,n]);while((t=Reflect.getPrototypeOf(t))&&t!==Object.prototype);return e};function He(t,{include:e,exclude:n}={}){let r=o=>{let i=s=>typeof s=="string"?o===s:s.test(o);return e?e.some(i):n?!n.some(i):!0};for(let[o,i]of ur(t.constructor.prototype)){if(i==="constructor"||!r(i))continue;let s=Reflect.getOwnPropertyDescriptor(o,i);s&&typeof s.value=="function"&&(t[i]=t[i].bind(t))}return t}function P(){}function Ft(t,e){for(let n in e)t[n]=e[n];return t}function Qe(t){return t()}function Et(){return Object.create(null)}function x(t){t.forEach(Qe)}function Q(t){return typeof t=="function"}function A(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Pt(t){return Object.keys(t).length===0}function ge(t,...e){if(t==null)return P;let n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function B(t,e,n){t.$$.on_destroy.push(ge(e,n))}function Fe(t,e,n){return t.set(n),e}var Pe=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,_e=class{constructor(e){this.options=e,this._listeners="WeakMap"in Pe?new WeakMap:void 0}observe(e,n){return this._listeners.set(e,n),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!==null&&e!==void 0?e:this._observer=new ResizeObserver(n=>{var r;for(let o of n)_e.entries.set(o.target,o),(r=this._listeners.get(o.target))===null||r===void 0||r(o)})}};_e.entries="WeakMap"in Pe?new WeakMap:void 0;var $t=!1;function fr(){$t=!0}function dr(){$t=!1}function v(t,e){t.appendChild(e)}function S(t,e,n){t.insertBefore(e,n||null)}function k(t){t.parentNode&&t.parentNode.removeChild(t)}function te(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function C(t){return document.createElement(t)}function jt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function z(t){return document.createTextNode(t)}function j(){return z(" ")}function X(){return z("")}function $(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function le(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function $e(t){return function(e){e.target===this&&t.call(this,e)}}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function We(t,e){for(let n in e)p(t,n,e[n])}function pr(t){return Array.from(t.childNodes)}function W(t,e){e=""+e,t.data!==e&&(t.data=e)}function J(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function mr(t,e,{bubbles:n=!1,cancelable:r=!1}={}){let o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}function Ke(t,e){return new t(e)}var he;function me(t){he=t}function Tt(){if(!he)throw new Error("Function called outside component initialization");return he}function ae(t){Tt().$$.on_mount.push(t)}function be(){let t=Tt();return(e,n,{cancelable:r=!1}={})=>{let o=t.$$.callbacks[e];if(o){let i=mr(e,n,{cancelable:r});return o.slice().forEach(s=>{s.call(t,i)}),!i.defaultPrevented}return!0}}var se=[];var L=[],ce=[],Ve=[],_r=Promise.resolve(),Be=!1;function hr(){Be||(Be=!0,_r.then(Mt))}function Ue(t){ce.push(t)}function Ge(t){Ve.push(t)}var Re=new Set,ie=0;function Mt(){if(ie!==0)return;let t=he;do{try{for(;ie<se.length;){let e=se[ie];ie++,me(e),gr(e.$$)}}catch(e){throw se.length=0,ie=0,e}for(me(null),se.length=0,ie=0;L.length;)L.pop()();for(let e=0;e<ce.length;e+=1){let n=ce[e];Re.has(n)||(Re.add(n),n())}ce.length=0}while(se.length);for(;Ve.length;)Ve.pop()();Be=!1,Re.clear(),me(t)}function gr(t){if(t.fragment!==null){t.update(),x(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ue)}}function br(t){let e=[],n=[];ce.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),ce=e}var Ee=new Set,ee;function q(){ee={r:0,c:[],p:ee}}function H(){ee.r||x(ee.c),ee=ee.p}function g(t,e){t&&t.i&&(Ee.delete(t),t.i(e))}function w(t,e,n,r){if(t&&t.o){if(Ee.has(t))return;Ee.add(t),ee.c.push(()=>{Ee.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Nt(t,e){let n={},r={},o={$$scope:1},i=t.length;for(;i--;){let s=t[i],l=e[i];if(l){for(let c in s)c in l||(r[c]=1);for(let c in l)o[c]||(n[c]=l[c],o[c]=1);t[i]=l}else for(let c in s)o[c]=1}for(let s in r)s in n||(n[s]=void 0);return n}var yr=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],si=new Set([...yr]);function Ye(t,e,n){let r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function N(t){t&&t.c()}function M(t,e,n,r){let{fragment:o,after_update:i}=t.$$;o&&o.m(e,n),r||Ue(()=>{let s=t.$$.on_mount.map(Qe).filter(Q);t.$$.on_destroy?t.$$.on_destroy.push(...s):x(s),t.$$.on_mount=[]}),i.forEach(Ue)}function T(t,e){let n=t.$$;n.fragment!==null&&(br(n.after_update),x(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function vr(t,e){t.$$.dirty[0]===-1&&(se.push(t),hr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(t,e,n,r,o,i,s,l=[-1]){let c=he;me(t);let u=t.$$={fragment:null,ctx:[],props:i,update:P,not_equal:o,bound:Et(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Et(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};s&&s(u.root);let a=!1;if(u.ctx=n?n(t,e.props||{},(d,f,...h)=>{let _=h.length?h[0]:f;return u.ctx&&o(u.ctx[d],u.ctx[d]=_)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](_),a&&vr(t,d)),f}):[],u.update(),a=!0,x(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){fr();let d=pr(e.target);u.fragment&&u.fragment.l(d),d.forEach(k)}else u.fragment&&u.fragment.c();e.intro&&g(t.$$.fragment),M(t,e.target,e.anchor,e.customElement),dr(),Mt()}me(c)}var wr;typeof HTMLElement=="function"&&(wr=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(Qe).filter(Q);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){x(this.$$.on_disconnect)}$destroy(){T(this,1),this.$destroy=P}$on(t,e){if(!Q(e))return P;let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{let r=n.indexOf(e);r!==-1&&n.splice(r,1)}}$set(t){this.$$set&&!Pt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var I=class{$destroy(){T(this,1),this.$destroy=P}$on(e,n){if(!Q(n))return P;let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{let o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!Pt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var ue=[];function Y(t,e=P){let n,r=new Set;function o(l){if(A(t,l)&&(t=l,n)){let c=!ue.length;for(let u of r)u[1](),ue.push(u,t);if(c){for(let u=0;u<ue.length;u+=2)ue[u][0](ue[u+1]);ue.length=0}}}function i(l){o(l(t))}function s(l,c=P){let u=[l,c];return r.add(u),r.size===1&&(n=e(o)||P),l(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:o,update:i,subscribe:s}}function kr(t){let e,n=[{width:t[1]},{height:t[1]},{"stroke-width":"0"},{class:t[2]},t[0].a,t[4],{xmlns:"http://www.w3.org/2000/svg"}],r={};for(let o=0;o<n.length;o+=1)r=Ft(r,n[o]);return{c(){e=jt("svg"),We(e,r)},m(o,i){S(o,e,i),e.innerHTML=t[3]},p(o,[i]){i&8&&(e.innerHTML=o[3]),We(e,r=Nt(n,[i&2&&{width:o[1]},i&2&&{height:o[1]},{"stroke-width":"0"},i&4&&{class:o[2]},i&1&&o[0].a,i&16&&o[4],{xmlns:"http://www.w3.org/2000/svg"}]))},i:P,o:P,d(o){o&&k(e)}}}function Cr(t,e,n){let{src:r}=e,{size:o="1em"}=e,{color:i=void 0}=e,{title:s=void 0}=e,{className:l=""}=e,c,u;return t.$$set=a=>{"src"in a&&n(0,r=a.src),"size"in a&&n(1,o=a.size),"color"in a&&n(5,i=a.color),"title"in a&&n(6,s=a.title),"className"in a&&n(2,l=a.className)},t.$$.update=()=>{if(t.$$.dirty&33)e:n(4,u={}),i&&(r.a.stroke!=="none"&&n(4,u.stroke=i,u),r.a.fill!=="none"&&n(4,u.fill=i,u));if(t.$$.dirty&65)e:n(3,c=(s?`<title>${s}</title>`:"")+r.c)},[r,o,l,c,u,i,s]}var Xe=class extends I{constructor(e){super(),D(this,e,Cr,kr,A,{src:0,size:1,color:5,title:6,className:2})}},R=Xe;var At={a:{viewBox:"0 0 24 24"},c:`<g><path fill="none" d="M0 0H24V24H0z"></path>
<path d="M12 19c.828 0 1.5.672 1.5 1.5S12.828 22 12 22s-1.5-.672-1.5-1.5.672-1.5 1.5-1.5zm0-17c3.314 0 6 2.686 6 6 0 2.165-.753 3.29-2.674 4.923C13.399 14.56 13 15.297 13 17h-2c0-2.474.787-3.695 3.031-5.601C15.548 10.11 16 9.434 16 8c0-2.21-1.79-4-4-4S8 5.79 8 8v1H6V8c0-3.314 2.686-6 6-6z"></path></g>`};var It={a:{viewBox:"0 0 16 16",fill:"currentColor"},c:'<path fill-rule="evenodd" clip-rule="evenodd" d="M14.431 3.323l-8.47 10-.79-.036-3.35-4.77.818-.574 2.978 4.24 8.051-9.506.764.646z"></path>'};var xt={a:{viewBox:"0 0 16 16",fill:"currentColor"},c:'<path fill-rule="evenodd" clip-rule="evenodd" d="M7.116 8l-4.558 4.558.884.884L8 8.884l4.558 4.558.884-.884L8.884 8l4.558-4.558-.884-.884L8 7.116 3.442 2.558l-.884.884L7.116 8z"></path>'};function Dt(t,e,n){let r=t.slice();r[4]=e[n];let o=r[1][r[4]];r[5]=o;let i=r[5].valid===!0;return r[6]=i,r}function Sr(t){let e,n,r,o;return e=new R({props:{color:"currentColor",src:At}}),{c(){N(e.$$.fragment),n=j(),r=C("span"),r.textContent="Validity Unknown",p(r,"class","theme-validity-text")},m(i,s){M(e,i,s),S(i,n,s),S(i,r,s),o=!0},p:P,i(i){o||(g(e.$$.fragment,i),o=!0)},o(i){w(e.$$.fragment,i),o=!1},d(i){T(e,i),i&&k(n),i&&k(r)}}}function Or(t){let e,n,r,o;return e=new R({props:{color:"currentColor",src:xt}}),{c(){N(e.$$.fragment),n=j(),r=C("span"),r.textContent="Invalid",p(r,"class","theme-validity-text")},m(i,s){M(e,i,s),S(i,n,s),S(i,r,s),o=!0},p:P,i(i){o||(g(e.$$.fragment,i),o=!0)},o(i){w(e.$$.fragment,i),o=!1},d(i){T(e,i),i&&k(n),i&&k(r)}}}function Er(t){let e,n,r,o;return e=new R({props:{color:"currentColor",src:It}}),{c(){N(e.$$.fragment),n=j(),r=C("span"),r.textContent="Valid",p(r,"class","theme-validity-text")},m(i,s){M(e,i,s),S(i,n,s),S(i,r,s),o=!0},p:P,i(i){o||(g(e.$$.fragment,i),o=!0)},o(i){w(e.$$.fragment,i),o=!1},d(i){T(e,i),i&&k(n),i&&k(r)}}}function zt(t){let e,n,r=t[4]+"",o,i,s,l,c,u,a,d,f,h,_=t[5].enabled?"Disable":"Enable",O,b,y,E,m,F,K,er=[Er,Or,Sr],Le=[];function tr(G,Oe){return G[6]?0:G[5].valid===!1?1:2}c=tr(t,-1),u=Le[c]=er[c](t);function nr(){return t[2](t[4])}function rr(){return t[3](t[4])}return{c(){e=C("div"),n=C("h1"),o=z(r),i=j(),s=C("div"),l=C("div"),u.c(),f=j(),h=C("button"),O=z(_),b=j(),p(n,"class","theme-id PopcornUI-krg8wz"),p(l,"class","theme-validity PopcornUI-krg8wz"),p(l,"data-value",a=t[5].valid),p(l,"data-error",d=t[6]?void 0:Pr(t[5].errors)),p(s,"class","theme-meta PopcornUI-krg8wz"),p(h,"class","theme-toggle PopcornUI-krg8wz"),p(e,"class","theme-container PopcornUI-krg8wz"),p(e,"id",y=t[4]),p(e,"data-enabled",E=t[5].enabled)},m(G,Oe){S(G,e,Oe),v(e,n),v(n,o),v(e,i),v(e,s),v(s,l),Le[c].m(l,null),v(e,f),v(e,h),v(h,O),v(e,b),m=!0,F||(K=[$(h,"click",nr),$(h,"submit",rr)],F=!0)},p(G,Oe){t=G,u.p(t,Oe)},i(G){m||(g(u),m=!0)},o(G){w(u),m=!1},d(G){G&&k(e),Le[c].d(),F=!1,x(K)}}}function Lt(t){let e=t[0][t[4]],n,r,o=zt(t);return{c(){o.c(),n=X()},m(i,s){o.m(i,s),S(i,n,s),r=!0},p(i,s){s&1&&A(e,e=i[0][i[4]])?(q(),w(o,1,1,P),H(),o=zt(i),o.c(),g(o,1),o.m(n.parentNode,n)):o.p(i,s)},i(i){r||(g(o),r=!0)},o(i){w(o),r=!1},d(i){i&&k(n),o.d(i)}}}function Fr(t){let e,n,r=Object.keys(t[1]),o=[];for(let s=0;s<r.length;s+=1)o[s]=Lt(Dt(t,r,s));let i=s=>w(o[s],1,1,()=>{o[s]=null});return{c(){e=C("div");for(let s=0;s<o.length;s+=1)o[s].c();p(e,"class","themes-wrapper PopcornUI-krg8wz")},m(s,l){S(s,e,l);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);n=!0},p(s,[l]){if(l&3){r=Object.keys(s[1]);let c;for(c=0;c<r.length;c+=1){let u=Dt(s,r,c);o[c]?(o[c].p(u,l),g(o[c],1)):(o[c]=Lt(u),o[c].c(),g(o[c],1),o[c].m(e,null))}for(q(),c=r.length;c<o.length;c+=1)i(c);H()}},i(s){if(!n){for(let l=0;l<r.length;l+=1)g(o[l]);n=!0}},o(s){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)w(o[l]);n=!1},d(s){s&&k(e),te(o,s)}}}var qt=Y({});function je(t){qt.update(e=>(e[t]=!e[t],e))}function Pr(t){return t?.map(e=>`Line ${e.line}: ${e.message}`).join(`
 `)}function $r(t,e,n){let r;B(t,qt,l=>n(0,r=l));let o=Popcorn.themes;return[r,o,l=>window.Popcorn.themes[l].toggle(),l=>window.Popcorn.themes[l].toggle()]}var Je=class extends I{constructor(e){super(),D(this,e,$r,Fr,A,{})}},Ht=Je;var Rt={getConfig:"POPCORN_GET_CONFIG",statusMessage:"POPCORN_STATUS_MESSAGE",log:"POPCORN_LOG",getThemes:"POPCORN_GET_THEMES",onThemeChange:"POPCORN_ON_THEME_CHANGE",saveThemeState:"POPCORN_SAVE_STATE",getQuickCss:"POPCORN_GET_QUICK_CSS",onQuickCssChange:"POPCORN_ON_QUICK_CSS_CHANGE",createQuickCssNode:"POPCORN_CREATE_QUICK_CSS_NODE",deleteQuickCssNode:"POPCORN_DELETE_QUICK_CSS_NODE",renameQuickCssNode:"POPCORN_RENAME_QUICK_CSS_NODE",updateQuickCssFile:"POPCORN_SAVE_QUICK_CSS_FILE"};var Ze=class{module;output;constructor(e,n="console"){this.module=e,this.output=this.#e(n)}#e(e){switch(e){case"ansi":case"terminal":return"ansi";default:return"console"}}#t(e){switch(e){case"info":case"warn":case"error":case"debug":return e;default:return"log"}}#r(e){switch(e){case"debug":return{str:"MediumSpringGreen",arr:[0,250,154]};case"info":return{str:"DeepSkyBlue",arr:[0,191,255]};case"error":return{str:"crimson",arr:[220,20,60]};case"warn":return{str:"DarkOrange",arr:[255,140,0]};default:return{str:"gold",arr:[255,215,0]}}}#o(e,n){return`\x1B[38;2;${e[0]};${e[1]};${e[2]}m${n}\x1B[0m`}async#n(e,n){e=this.#t(e);let r=this.#r(e),o=this.output==="ansi"?[`[${this.#o(r.arr,"Popcorn")} > ${this.module}]`]:[`[%cPopcorn%c > ${this.module}]`,`color: ${r.str};`,""];if(console[e](...o,...n),this.output==="ansi"){let{BrowserWindow:i}=await import("electron");i.getAllWindows().forEach(s=>s.webContents.send(Rt.log,e,...n))}}log=(...e)=>this.#n("log",e);info=(...e)=>this.#n("info",e);warn=(...e)=>this.#n("warn",e);error=(...e)=>this.#n("error",e);debug=(...e)=>this.#n("debug",e)},Te=Ze;var fe=new Te("Themes"),et=class{id;#e;constructor(e,n=!0){He(this),this.id=e,this.#t=n,Vt&&this.#r(),n&&this.enable(!1)}#t;get enabled(){return this.#t}set enabled(e){e?this.enable():this.disable(),this.#t=e}enable(e=!0){if(this.#e){fe.log(`"${this.id}" is already enabled.`);return}this.#t=!0;let n=this.#e=document.createElement("link");n.rel="stylesheet",n.id=this.id,n.href=`popcorn://theme/${this.id}`,n.dataset.popcorn="true",ne.end.before(n),fe.log(`"${this.id}" enabled.`),je(this.id),e&&PopcornNative.saveThemeState(this.id,!0)}disable(e=!0){if(!this.#e){fe.warn(`"${this.id}" is not enabled.`);return}this.#t=!1,this.#e.remove(),this.#e=null,fe.log(`"${this.id}" disabled.`),je(this.id),e&&PopcornNative.saveThemeState(this.id,!1)}toggle(e=!0){this.enabled?this.disable(e):this.enable(e)}update(){let e=fetch(`popcorn://theme/${this.id}`);this.#r(e)}valid="unknown";errors=[];async#r(e){e??=fetch(`popcorn://theme/${this.id}`);let n;typeof e=="string"?n=e:n=await(await e).text(),PopcornNative.validateCSS(n).then(r=>{de.verbose&&fe.debug(`Validated "${this.id}".`,r),this.valid=r.valid,this.errors=r.errors,je(this.id)}).catch(r=>{fe.error(`Failed to validate "${this.id}".`,r)})}},ye=class{start(){this.watchThemes()}populateThemes(e){let n={};for(let r in e)n[r]=new et(r,e[r].enabled);return n}watchThemes(){PopcornNative.onThemeChange(({id:e})=>{window.Popcorn.themes[e].update()})}};var yt=qe(tt());var yn=qe(tt()),vn=qe(gn());var{window:Co}=Pe;function bn(t){let e;return{c(){e=C("p"),e.textContent="Loading monaco editor...",p(e,"class","loading-overlay")},m(n,r){S(n,e,r)},d(n){n&&k(e)}}}function So(t){let e,n,r,o,i,s=!t[1]&&bn(t);return{c(){e=C("div"),s&&s.c(),n=j(),r=C("div"),p(r,"class","monaco-editor PopcornUI-1tm8p33"),p(e,"class","monaco-wrapper")},m(l,c){S(l,e,c),s&&s.m(e,null),v(e,n),v(e,r),t[9](r),o||(i=$(Co,"resize",(0,yn.debounce)(t[0],50)),o=!0)},p(l,[c]){l[1]?s&&(s.d(1),s=null):s||(s=bn(l),s.c(),s.m(e,n))},i:P,o:P,d(l){l&&k(e),s&&s.d(),t[9](null),o=!1,i()}}}function Oo(t,e,n){let r,{editor:o=null}=e,{content:i}=e,{actions:s=[]}=e,{commands:l=[]}=e,{options:c={}}=e,u=be(),a=!1;ae(async()=>{let _=await vn.default.init();_.editor.onDidCreateEditor(()=>{n(1,a=!0),f(),u("ready")}),n(3,o=_.editor.create(r,{language:"css",theme:"vs-dark",...c,value:i}));let O=l.map(b=>({...b,keybinding:b.keybinding(_.KeyCode,_.KeyMod)}));for(let b of O)o.addCommand(b.keybinding,b.handler,b.context??void 0);for(let b of s){let{id:y,label:E,handler:m}=b;o.addAction({id:"custom."+y,label:E,keybindings:[],run:m})}return o.onDidChangeModelContent(()=>{let b=o.getValue();b!==i&&(n(8,d=!0),n(4,i=b),u("change",i))}),()=>{o.dispose(),n(1,a=!1)}});let d=!1;function f(){a&&window.requestAnimationFrame(()=>{o.layout({width:0,height:0});let _=r.parentElement.getBoundingClientRect();o.layout({width:_.width,height:_.height})})}function h(_){L[_?"unshift":"push"](()=>{r=_,n(2,r)})}return t.$$set=_=>{"editor"in _&&n(3,o=_.editor),"content"in _&&n(4,i=_.content),"actions"in _&&n(5,s=_.actions),"commands"in _&&n(6,l=_.commands),"options"in _&&n(7,c=_.options)},t.$$.update=()=>{if(t.$$.dirty&282)e:typeof i=="string"&&a&&(d||o.getModel().setValue(i),n(8,d=!1))},[f,a,r,o,i,s,l,c,d,h]}var _t=class extends I{constructor(e){super(),D(this,e,Oo,So,A,{editor:3,content:4,actions:5,commands:6,options:7,recalculateSize:0})}get recalculateSize(){return this.$$.ctx[0]}},wn=_t;var kn={a:{viewBox:"0 0 16 16",fill:"currentColor"},c:'<path fill-rule="evenodd" clip-rule="evenodd" d="M4 7H3V4H0V3h3V0h1v3h3v1H4v3zm6.5-5.9l3.4 3.5.1.4v8.5l-.5.5h-10l-.5-.5V8h1v5h9V6H9V2H5V1h5.2l.3.1zM10 2v3h2.9L10 2z"></path>'};var Cn={a:{viewBox:"0 0 16 16",fill:"currentColor"},c:'<path fill-rule="evenodd" clip-rule="evenodd" d="M7 3H4V0H3v3H0v1h3v3h1V4h3V3zM5.5 7H5V6h.3l.8-.9.4-.1H14V4H8V3h6.5l.5.5v10l-.5.5h-13l-.5-.5V5h1v8h12V6H6.7l-.8.9-.4.1z"></path>'};var Sn={a:{viewBox:"0 0 16 16",fill:"currentColor"},c:'<path d="M15 8H1V7h14v1z"></path>'};var On={a:{viewBox:"0 0 1024 1024"},c:'<path d="M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 0 0-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zm-180 0H238c-13 0-24.8 7.9-29.7 20L136 643.2V256h188.5l119.6 114.4H748V444z"></path>'};var En={a:{viewBox:"0 0 1024 1024"},c:'<path d="M880 298.4H521L403.7 186.2a8.15 8.15 0 0 0-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32z"></path>'};var Fn={a:{viewBox:"0 0 512 512"},c:'<path d="M480 32l-64 368-223.3 80L0 400l19.6-94.8h82l-8 40.6L210 390.2l134.1-44.4 18.8-97.1H29.5l16-82h333.7l10.5-52.7H56.3l16.3-82H480z"></path>'};var Pn={a:{viewBox:"0 0 16 16",fill:"currentColor"},c:'<path d="M8 4c.367 0 .721.048 1.063.145a3.943 3.943 0 0 1 1.762 1.031 3.944 3.944 0 0 1 1.03 1.762c.097.34.145.695.145 1.062 0 .367-.048.721-.145 1.063a3.94 3.94 0 0 1-1.03 1.765 4.017 4.017 0 0 1-1.762 1.031C8.72 11.953 8.367 12 8 12s-.721-.047-1.063-.14a4.056 4.056 0 0 1-1.765-1.032A4.055 4.055 0 0 1 4.14 9.062 3.992 3.992 0 0 1 4 8c0-.367.047-.721.14-1.063a4.02 4.02 0 0 1 .407-.953A4.089 4.089 0 0 1 5.98 4.546a3.94 3.94 0 0 1 .957-.401A3.89 3.89 0 0 1 8 4z"></path>'};function Eo(t){let e,n=t[1].name+"",r;return{c(){e=C("span"),r=z(n),p(e,"class","item-name")},m(o,i){S(o,e,i),v(e,r)},p(o,i){i&2&&n!==(n=o[1].name+"")&&W(r,n)},d(o){o&&k(e)}}}function Fo(t){let e,n,r,o;return{c(){e=C("input"),p(e,"class","rename-input"),p(e,"autocorrect","off"),p(e,"autocapitalize","off"),p(e,"spellcheck","false"),p(e,"type","text"),e.value=n=t[1].name},m(i,s){S(i,e,s),t[8](e),r||(o=[$(e,"keydown",t[7]),$(e,"focusout",function(){Q(t[0]&&t[6])&&(t[0]&&t[6]).apply(this,arguments)})],r=!0)},p(i,s){t=i,s&2&&n!==(n=t[1].name)&&e.value!==n&&(e.value=n)},d(i){i&&k(e),t[8](null),r=!1,x(o)}}}function $n(t){let e,n;return e=new R({props:{color:"currentColor",src:Pn}}),{c(){N(e.$$.fragment)},m(r,o){M(e,r,o),n=!0},p:P,i(r){n||(g(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function Po(t){let e,n,r,o,i,s,l;n=new R({props:{color:"currentColor",src:Fn}});function c(f,h){return f[0]?Fo:Eo}let u=c(t,-1),a=u(t),d=t[4]?.[t[1].location]?.unsaved&&$n(t);return{c(){e=C("button"),N(n.$$.fragment),r=j(),a.c(),o=j(),d&&d.c(),p(e,"class","item file"),J(e,"--depth",t[2])},m(f,h){S(f,e,h),M(n,e,null),v(e,r),a.m(e,null),v(e,o),d&&d.m(e,null),i=!0,s||(l=[$(e,"click",t[5]),$(e,"submit",le(t[5])),$(e,"dblclick",t[6]),$(e,"keydown",$e(le(t[7])))],s=!0)},p(f,[h]){u===(u=c(f,h))&&a?a.p(f,h):(a.d(1),a=u(f),a&&(a.c(),a.m(e,o))),f[4]?.[f[1].location]?.unsaved?d?(d.p(f,h),h&18&&g(d,1)):(d=$n(f),d.c(),g(d,1),d.m(e,null)):d&&(q(),w(d,1,1,()=>{d=null}),H()),(!i||h&4)&&J(e,"--depth",f[2])},i(f){i||(g(n.$$.fragment,f),g(d),i=!0)},o(f){w(n.$$.fragment,f),w(d),i=!1},d(f){f&&k(e),T(n),a.d(),d&&d.d(),s=!1,x(l)}}}function $o(t,e,n){let r;B(t,re,f=>n(4,r=f));let{file:o}=e,{rename:i=!1}=e,{depth:s=0}=e;function l(){pe.set(o)}let c;function u(){i&&c?.value!==o.name&&PopcornNative.renameQuickCssNode(o.location,c.value),n(0,i=!i)}function a(f){switch(f.key){case"F2":u();break;case"Enter":i&&u();break}}function d(f){L[f?"unshift":"push"](()=>{c=f,n(3,c)})}return t.$$set=f=>{"file"in f&&n(1,o=f.file),"rename"in f&&n(0,i=f.rename),"depth"in f&&n(2,s=f.depth)},t.$$.update=()=>{if(t.$$.dirty&8)e:c&&(c.focus(),c.setSelectionRange(0,c.value.length-4))},[i,o,s,c,r,l,u,a,d]}var ht=class extends I{constructor(e){super(),D(this,e,$o,Po,A,{file:1,rename:0,depth:2})}},jn=ht;function Tn(t,e,n){let r=t.slice();return r[9]=e[n],r}function jo(t){let e,n;return e=new R({props:{color:"currentColor",src:En}}),{c(){N(e.$$.fragment)},m(r,o){M(e,r,o),n=!0},p:P,i(r){n||(g(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function To(t){let e,n;return e=new R({props:{color:"currentColor",src:On}}),{c(){N(e.$$.fragment)},m(r,o){M(e,r,o),n=!0},p:P,i(r){n||(g(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function Mo(t){let e,n=t[2].name+"",r;return{c(){e=C("span"),r=z(n),p(e,"class","item-name")},m(o,i){S(o,e,i),v(e,r)},p(o,i){i&4&&n!==(n=o[2].name+"")&&W(r,n)},d(o){o&&k(e)}}}function No(t){let e,n,r,o;return{c(){e=C("input"),p(e,"class","rename-input"),p(e,"autocorrect","off"),p(e,"autocapitalize","off"),p(e,"spellcheck","false"),p(e,"type","text"),e.value=n=t[2].name},m(i,s){S(i,e,s),t[8](e),r||(o=[$(e,"keydown",t[7]),$(e,"focusout",function(){Q(t[0]&&t[6])&&(t[0]&&t[6]).apply(this,arguments)})],r=!0)},p(i,s){t=i,s&4&&n!==(n=t[2].name)&&e.value!==n&&(e.value=n)},d(i){i&&k(e),t[8](null),r=!1,x(o)}}}function Mn(t){let e,n,r=t[2].files,o=[];for(let s=0;s<r.length;s+=1)o[s]=Nn(Tn(t,r,s));let i=s=>w(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=X()},m(s,l){for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(s,l);S(s,e,l),n=!0},p(s,l){if(l&12){r=s[2].files;let c;for(c=0;c<r.length;c+=1){let u=Tn(s,r,c);o[c]?(o[c].p(u,l),g(o[c],1)):(o[c]=Nn(u),o[c].c(),g(o[c],1),o[c].m(e.parentNode,e))}for(q(),c=r.length;c<o.length;c+=1)i(c);H()}},i(s){if(!n){for(let l=0;l<r.length;l+=1)g(o[l]);n=!0}},o(s){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)w(o[l]);n=!1},d(s){te(o,s),s&&k(e)}}}function Ao(t){let e,n;return e=new jn({props:{file:t[9],depth:t[3]+1}}),{c(){N(e.$$.fragment)},m(r,o){M(e,r,o),n=!0},p(r,o){let i={};o&4&&(i.file=r[9]),o&8&&(i.depth=r[3]+1),e.$set(i)},i(r){n||(g(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function Io(t){let e,n;return e=new xe({props:{folder:t[9],depth:t[3]+1}}),{c(){N(e.$$.fragment)},m(r,o){M(e,r,o),n=!0},p(r,o){let i={};o&4&&(i.folder=r[9]),o&8&&(i.depth=r[3]+1),e.$set(i)},i(r){n||(g(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function Nn(t){let e,n,r,o,i=[Io,Ao],s=[];function l(c,u){return"files"in c[9]?0:1}return e=l(t,-1),n=s[e]=i[e](t),{c(){n.c(),r=X()},m(c,u){s[e].m(c,u),S(c,r,u),o=!0},p(c,u){let a=e;e=l(c,u),e===a?s[e].p(c,u):(q(),w(s[a],1,1,()=>{s[a]=null}),H(),n=s[e],n?n.p(c,u):(n=s[e]=i[e](c),n.c()),g(n,1),n.m(r.parentNode,r))},i(c){o||(g(n),o=!0)},o(c){w(n),o=!1},d(c){s[e].d(c),c&&k(r)}}}function xo(t){let e,n,r,o,i,s,l,c,u,a=[To,jo],d=[];function f(y,E){return y[1]?0:1}n=f(t,-1),r=d[n]=a[n](t);function h(y,E){return y[0]?No:Mo}let _=h(t,-1),O=_(t),b=t[1]&&Mn(t);return{c(){e=C("button"),r.c(),o=j(),O.c(),i=j(),b&&b.c(),s=X(),p(e,"class","item folder"),J(e,"--depth",t[3]),p(e,"data-opened",t[1])},m(y,E){S(y,e,E),d[n].m(e,null),v(e,o),O.m(e,null),S(y,i,E),b&&b.m(y,E),S(y,s,E),l=!0,c||(u=[$(e,"click",t[5]),$(e,"submit",le(t[5])),$(e,"dblclick",t[6]),$(e,"keydown",$e(le(t[7])))],c=!0)},p(y,[E]){let m=n;n=f(y,E),n===m?d[n].p(y,E):(q(),w(d[m],1,1,()=>{d[m]=null}),H(),r=d[n],r?r.p(y,E):(r=d[n]=a[n](y),r.c()),g(r,1),r.m(e,o)),_===(_=h(y,E))&&O?O.p(y,E):(O.d(1),O=_(y),O&&(O.c(),O.m(e,null))),(!l||E&8)&&J(e,"--depth",y[3]),(!l||E&2)&&p(e,"data-opened",y[1]),y[1]?b?(b.p(y,E),E&2&&g(b,1)):(b=Mn(y),b.c(),g(b,1),b.m(s.parentNode,s)):b&&(q(),w(b,1,1,()=>{b=null}),H())},i(y){l||(g(r),g(b),l=!0)},o(y){w(r),w(b),l=!1},d(y){y&&k(e),d[n].d(),O.d(),y&&k(i),b&&b.d(y),y&&k(s),c=!1,x(u)}}}function Do(t,e,n){let{folder:r}=e,{rename:o=!1}=e,{opened:i=!0}=e,{depth:s=0}=e;function l(){n(1,i=!i),oe.set(r)}let c;function u(){o&&c?.value!==r.name&&PopcornNative.renameQuickCssNode(r.location,c.value),n(0,o=!o)}function a(f){switch(f.key){case"F2":u();break;case"Enter":o&&u();break}}function d(f){L[f?"unshift":"push"](()=>{c=f,n(4,c)})}return t.$$set=f=>{"folder"in f&&n(2,r=f.folder),"rename"in f&&n(0,o=f.rename),"opened"in f&&n(1,i=f.opened),"depth"in f&&n(3,s=f.depth)},t.$$.update=()=>{if(t.$$.dirty&16)e:c&&(c.focus(),c.setSelectionRange(0,c.value.length))},[o,i,r,s,c,l,u,a,d]}var xe=class extends I{constructor(e){super(),D(this,e,Do,xo,A,{folder:2,rename:0,opened:1,depth:3})}},An=xe;function zo(t){let e,n,r,o,i,s,l=t[1].name+"",c,u,a,d,f,h,_,O,b,y,E,m;return o=new R({props:{color:"currentColor",src:Sn}}),d=new R({props:{color:"currentColor",src:kn}}),_=new R({props:{color:"currentColor",src:Cn}}),b=new An({props:{folder:window.Popcorn.quickCss}}),{c(){e=C("div"),n=C("div"),r=C("button"),N(o.$$.fragment),i=j(),s=C("span"),c=z(l),u=j(),a=C("button"),N(d.$$.fragment),f=j(),h=C("button"),N(_.$$.fragment),O=j(),N(b.$$.fragment),p(r,"class","action PopcornUI-1je845r"),p(r,"data-action","delete"),p(s,"class","selected-file"),p(a,"class","action PopcornUI-1je845r"),p(a,"data-action","new-file"),p(h,"class","action PopcornUI-1je845r"),p(h,"data-action","new-folder"),p(n,"class","action-bar PopcornUI-1je845r"),p(e,"class","sidebar PopcornUI-1je845r"),J(e,"width","22ch")},m(F,K){S(F,e,K),v(e,n),v(n,r),M(o,r,null),v(n,i),v(n,s),v(s,c),v(n,u),v(n,a),M(d,a,null),v(n,f),v(n,h),M(_,h,null),v(e,O),M(b,e,null),t[5](e),y=!0,E||(m=[$(r,"click",t[2]),$(r,"submit",t[2]),$(a,"click",t[3]),$(a,"submit",t[3]),$(h,"click",t[4]),$(h,"submit",t[4])],E=!0)},p(F,[K]){(!y||K&2)&&l!==(l=F[1].name+"")&&W(c,l)},i(F){y||(g(o.$$.fragment,F),g(d.$$.fragment,F),g(_.$$.fragment,F),g(b.$$.fragment,F),y=!0)},o(F){w(o.$$.fragment,F),w(d.$$.fragment,F),w(_.$$.fragment,F),w(b.$$.fragment,F),y=!1},d(F){F&&k(e),T(o),T(d),T(_),T(b),t[5](null),E=!1,x(m)}}}var re=Y({});function Lo(t,e,n){let r,o;B(t,oe,d=>n(6,r=d)),B(t,xn,d=>n(1,o=d));let i,s=be();ae(()=>{let d=new ResizeObserver(f=>{s("resize",f[0])});return d.observe(i),()=>{d.disconnect()}});function l(){PopcornNative.deleteQuickCssNode(o.location)}function c(){PopcornNative.createQuickCssNode(r.location,"file")}function u(){PopcornNative.createQuickCssNode(r.location,"folder")}function a(d){L[d?"unshift":"push"](()=>{i=d,n(0,i)})}return[i,o,l,c,u,a]}var gt=class extends I{constructor(e){super(),D(this,e,Lo,zo,A,{})}},In=gt;function Dn(t){let e,n;return e=new In({}),e.$on("resize",function(){Q((0,yt.debounce)(t[1],50))&&(0,yt.debounce)(t[1],50).apply(this,arguments)}),{c(){N(e.$$.fragment)},m(r,o){M(e,r,o),n=!0},p(r,o){t=r},i(r){n||(g(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function zn(t){let e,n,r=t[4].message+"",o,i;return{c(){e=C("div"),n=C("div"),o=z(r),p(n,"class","status-message"),p(e,"class","status"),p(e,"data-type",i=t[4].type??void 0)},m(s,l){S(s,e,l),v(e,n),v(n,o)},p(s,l){l&16&&r!==(r=s[4].message+"")&&W(o,r),l&16&&i!==(i=s[4].type??void 0)&&p(e,"data-type",i)},d(s){s&&k(e)}}}function qo(t){let e,n=t[3],r,o,i,s=(t[2]?.name??wt)+"",l,c,u,a,d,f,h,_=Dn(t),O=t[4].type&&zn(t);function b(m){t[8](m)}function y(m){t[9](m)}let E={actions:t[5],commands:t[6]};return t[0]!==void 0&&(E.content=t[0]),t[1]!==void 0&&(E.recalculateSize=t[1]),a=new wn({props:E}),L.push(()=>Ye(a,"content",b)),L.push(()=>Ye(a,"recalculateSize",y)),a.$on("change",t[7]),{c(){e=C("div"),_.c(),r=j(),o=C("div"),i=C("span"),l=z(s),c=j(),O&&O.c(),u=j(),N(a.$$.fragment),p(i,"class","selected-file"),p(o,"class","status-bar PopcornUI-szncc9"),p(e,"class","quickCss-wrapper PopcornUI-szncc9")},m(m,F){S(m,e,F),_.m(e,null),v(e,r),v(e,o),v(o,i),v(i,l),v(o,c),O&&O.m(o,null),v(e,u),M(a,e,null),h=!0},p(m,[F]){F&8&&A(n,n=m[3])?(q(),w(_,1,1,P),H(),_=Dn(m),_.c(),g(_,1),_.m(e,r)):_.p(m,F),(!h||F&4)&&s!==(s=(m[2]?.name??wt)+"")&&W(l,s),m[4].type?O?O.p(m,F):(O=zn(m),O.c(),O.m(o,null)):O&&(O.d(1),O=null);let K={};!d&&F&1&&(d=!0,K.content=m[0],Ge(()=>d=!1)),!f&&F&2&&(f=!0,K.recalculateSize=m[1],Ge(()=>f=!1)),a.$set(K)},i(m){h||(g(_),g(a.$$.fragment,m),h=!0)},o(m){w(_),w(a.$$.fragment,m),h=!1},d(m){m&&k(e),_.d(m),O&&O.d(),T(a)}}}var Ln=Y();function qn(){Ln.update(t=>!t)}var vt=Y(),pe=Y(),oe=Y(),xn={subscribe:vt.subscribe},bt=Y({}),wt="Select a file to edit";function Ho(t,e,n){let r,o=P,i=()=>(o(),o=ge(pe,m=>n(2,r=m)),pe),s,l,c,u=P,a=()=>(u(),u=ge(bt,m=>n(4,c=m)),bt);B(t,pe,m=>n(2,r=m)),B(t,re,m=>n(10,s=m)),B(t,Ln,m=>n(3,l=m)),B(t,bt,m=>n(4,c=m)),t.$$.on_destroy.push(()=>o()),t.$$.on_destroy.push(()=>u());let d=wt;pe.subscribe(m=>{m&&(n(0,d=m.content),vt.set(m))}),oe.subscribe(m=>{m&&vt.set(m)});let f=[{id:"save",label:"Save the currently selected file",handler:O}],h=[{keybinding:(m,F)=>F.CtrlCmd|m.KeyS,handler:O}];function _(){r&&(Fe(re,s[r.location]??={},s),Fe(re,s[r.location].unsaved=!0,s))}function O(){r&&(Fe(re,s[r.location].unsaved=!1,s),PopcornNative.updateQuickCssFile(r.location,d))}let b;function y(m){d=m,n(0,d)}function E(m){b=m,n(1,b)}return[d,b,r,l,c,f,h,_,y,E]}var kt=class extends I{constructor(e){super(),D(this,e,Ho,qo,A,{})}},Hn=kt;var Ro=new Te("QuickCSS"),Se=class{styleElements=new Map;start(){this.populateQuickCss(),this.watchQuickCss(),oe.set(window.Popcorn.quickCss)}populateQuickCss(){function e(s){let l="",c="",u=/^@import\s+(?:url\(['"]?.*?['"]?\)|['"].*?['"])(\s+[^;]+?)?;$/gmi;for(let a of s.files)if("files"in a){let d=e(a);l+=d[0],c+=d[1]}else{let d=a.content.replace(u,f=>(l+=f.replace(/;$/,"")+"; /* "+a.location+" */","")).trim();d&&(c+=`

/* `+a.location+` */
`+d)}return[l,c]}let[n,r]=e(Popcorn.quickCss),o=this.styleElements.get("imports");if(o)n!==o.textContent&&(o.textContent=n);else{let s=document.createElement("style");s.id="popcorn-quickcss-imports",s.textContent=n,s.dataset.popcorn="true",ne.end.after(s),this.styleElements.set("imports",s)}let i=this.styleElements.get("contents");if(i)r!==i.textContent&&(i.textContent=r);else{let s=document.createElement("style");s.id="popcorn-quickcss-contents",s.textContent=r,s.dataset.popcorn="true",ne.end.after(s),this.styleElements.set("contents",s)}}watchQuickCss(){PopcornNative.onQuickCssChange(e=>{de.verbose&&Ro.debug("QuickCSS Updated"),Popcorn.quickCss=e,qn(),this.populateQuickCss()})}};function Rn(t,e,n){let r=t.slice();r[7]=e[n];let o=r[0].find(function(...s){return t[6](r[7],...s)});return r[8]=o,r}function Vn(t,e,n){let r=t.slice();return r[11]=e[n].name,r}function Bn(t){let e,n=t[11]+"",r,o,i,s,l;function c(){return t[4](t[11])}function u(){return t[5](t[11])}return{c(){e=C("button"),r=z(n),o=j(),p(e,"class","tab PopcornUI-cd56hu"),p(e,"data-selected",i=t[1]===t[11])},m(a,d){S(a,e,d),v(e,r),v(e,o),s||(l=[$(e,"click",c),$(e,"keypress",u)],s=!0)},p(a,d){t=a,d&1&&n!==(n=t[11]+"")&&W(r,n),d&3&&i!==(i=t[1]===t[11])&&p(e,"data-selected",i)},d(a){a&&k(e),s=!1,x(l)}}}function Un(t){let e,n,r,o,i,s;var l=t[8].component;function c(u){return{}}return l&&(n=Ke(l,c(t))),{c(){e=C("div"),n&&N(n.$$.fragment),r=j(),p(e,"class","tab-wrapper PopcornUI-cd56hu"),p(e,"data-selected",o=t[8].name===t[1]),p(e,"data-name",i=t[8].name)},m(u,a){S(u,e,a),n&&M(n,e,null),v(e,r),s=!0},p(u,a){if(a&1&&l!==(l=u[8].component)){if(n){q();let d=n;w(d.$$.fragment,1,0,()=>{T(d,1)}),H()}l?(n=Ke(l,c(u)),N(n.$$.fragment),g(n.$$.fragment,1),M(n,e,r)):n=null}(!s||a&3&&o!==(o=u[8].name===u[1]))&&p(e,"data-selected",o),(!s||a&1&&i!==(i=u[8].name))&&p(e,"data-name",i)},i(u){s||(n&&g(n.$$.fragment,u),s=!0)},o(u){n&&w(n.$$.fragment,u),s=!1},d(u){u&&k(e),n&&T(n)}}}function Vo(t){let e,n,r,o,i=t[0],s=[];for(let a=0;a<i.length;a+=1)s[a]=Bn(Vn(t,i,a));let l=t[2],c=[];for(let a=0;a<l.length;a+=1)c[a]=Un(Rn(t,l,a));let u=a=>w(c[a],1,1,()=>{c[a]=null});return{c(){e=C("div");for(let a=0;a<s.length;a+=1)s[a].c();n=j();for(let a=0;a<c.length;a+=1)c[a].c();r=X(),p(e,"class","tab-list PopcornUI-cd56hu")},m(a,d){S(a,e,d);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,null);S(a,n,d);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(a,d);S(a,r,d),o=!0},p(a,[d]){if(d&11){i=a[0];let f;for(f=0;f<i.length;f+=1){let h=Vn(a,i,f);s[f]?s[f].p(h,d):(s[f]=Bn(h),s[f].c(),s[f].m(e,null))}for(;f<s.length;f+=1)s[f].d(1);s.length=i.length}if(d&7){l=a[2];let f;for(f=0;f<l.length;f+=1){let h=Rn(a,l,f);c[f]?(c[f].p(h,d),g(c[f],1)):(c[f]=Un(h),c[f].c(),g(c[f],1),c[f].m(r.parentNode,r))}for(q(),f=l.length;f<c.length;f+=1)u(f);H()}},i(a){if(!o){for(let d=0;d<l.length;d+=1)g(c[d]);o=!0}},o(a){c=c.filter(Boolean);for(let d=0;d<c.length;d+=1)w(c[d]);o=!1},d(a){a&&k(e),te(s,a),a&&k(n),te(c,a),a&&k(r)}}}function Bo(t,e,n){let{tabs:r}=e,o=r?.[0]?.name,i=[o];function s(a){n(1,o=a),i.includes(a)||i.push(a)}let l=a=>s(a),c=a=>s(a),u=(a,d)=>d.name===a;return t.$$set=a=>{"tabs"in a&&n(0,r=a.tabs)},[r,o,i,s,l,c,u]}var Ct=class extends I{constructor(e){super(),D(this,e,Bo,Vo,A,{tabs:0})}},Qn=Ct;var Kn=(t,e)=>{let n=Object.keys(t);return n.length!==Object.keys(e).length?!1:n.every(r=>Object.prototype.hasOwnProperty.call(e,r)&&t[r]===e[r])},Uo=(t,e)=>t.length===e.length&&t.every((n,r)=>Kn(n,e[r])),Qo=(t,e)=>{if(t.length<e.length)return!1;let n=t.length-e.length;for(let r=e.length-1;r>=0;r-=1)if(!Kn(t[n+r],e[r]))return!1;return!0},Gn=t=>t.reduce((e,n)=>({...e,[n]:!0}),{}),Yn=["ctrl","shift","alt","meta"],Wo=Gn(Yn),Ko=t=>Object.keys(t).filter(e=>!Wo[e]).length===1,De=(t,e)=>{if(!t)throw new Error(e)},ze=(t,e,n)=>{De(typeof t===n,`The ${e} must be a ${n}; given ${typeof t}`)},Xn=t=>t.split(/ +/g).map(e=>{let n=e.split("+").filter(Boolean),r=Gn(n);return De(Object.keys(r).length>=n.length,`Hotkey combination has duplicates "${t}"`),De(Ko(r),`Invalid hotkey combination: "${t}"`),r}),Go=(t,e)=>{ze(t,"hotkey","string"),ze(e,"callback","function")},Wn=(t,e)=>(n,r)=>{Go(n,r),e(t,n,r)},Yo=(t,e,n)=>{t.push({hotkey:Xn(e),callback:n})},Xo=(t,e,n)=>{let r=Xn(e),o=t.findIndex(i=>i.callback===n&&Uo(r,i.hotkey));o!==-1&&t.splice(o,1)},Jo=(t,e)=>{let n=null;return()=>{clearTimeout(n),n=setTimeout(t,e)}},Zo=t=>{switch(t){case"+":return"plus";case" ":return"space";default:return t.toLowerCase()}},ei=(t,e)=>{let n=[],r=Jo(()=>{n=[]},e);return o=>{if(o.repeat||o.getModifierState(o.key))return;r();let i={[Zo(o.key)]:!0};Yn.forEach(s=>{o[`${s}Key`]&&(i[s]=!0)}),n.push(i),t.forEach(s=>{Qo(n,s.hotkey)&&s.callback(o)})}},ti=t=>{let{debounceTime:e=500,autoEnable:n=!0}=t||{};return ze(e,"debounceTime","number"),De(e>0,"debounceTime must be > 0"),ze(n,"autoEnable","boolean"),{debounceTime:e,autoEnable:n}},Jn=t=>{let{debounceTime:e,autoEnable:n}=ti(t),r=[],o=ei(r,e),i=()=>document.addEventListener("keydown",o),s=()=>document.removeEventListener("keydown",o);return n&&i(),{register:Wn(r,Yo),unregister:Wn(r,Xo),enable:i,disable:s}};function ni(t){let e,n,r;return n=new Qn({props:{tabs:t[1]}}),{c(){e=C("dialog"),N(n.$$.fragment),p(e,"class","PopcornUI-dialog PopcornUI-6ipy8a")},m(o,i){S(o,e,i),M(n,e,null),t[2](e),r=!0},p:P,i(o){r||(g(n.$$.fragment,o),r=!0)},o(o){w(n.$$.fragment,o),r=!1},d(o){o&&k(e),T(n),t[2](null)}}}function ri(t,e,n){let r,o=!1;function i(){o?r.close():r.showModal(),o=!o,document.documentElement.dataset.popcornUiOpen=o.toString()}ae(()=>{let c=Jn({autoEnable:!0});c.register(de.hotkey,u=>{u.stopImmediatePropagation(),u.stopPropagation(),u.preventDefault(),i()}),c.register("escape",u=>{o&&(u.stopImmediatePropagation(),u.stopPropagation(),u.preventDefault(),i())})});let s=[{name:"Themes",component:Ht},{name:"QuickCSS",component:Hn}];function l(c){L[c?"unshift":"push"](()=>{r=c,n(0,r)})}return[r,s,l]}var St=class extends I{constructor(e){super(),D(this,e,ri,ni,A,{})}},Zn=St;var ne={start:document.createComment(" section:Popcorn "),end:document.createComment(" endsection ")},de=await PopcornNative.config,Vt=!!PopcornNative.validateCSS,Pc=new class{async start(){document.head.append(ne.start,ne.end);let e=new ye,n=new Se,r={themes:e.populateThemes(await PopcornNative.getThemes()),quickCss:await PopcornNative.getQuickCss()};window.Popcorn=r,new Zn({target:document.body}),e.start(),n.start()}};export{ne as comments,de as config,Pc as default,Vt as shouldValidate};
